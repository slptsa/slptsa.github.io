<header class="site-header">
  <div class="header-banner">
    {{ if .Site.Params.headerBanner }}
      <a href="{{ "/" | relURL }}" class="banner-link">
        <img src="{{ .Site.Params.headerBanner }}" alt="{{ .Site.Title }}" class="banner-image">
      </a>
    {{ else }}
      <div class="site-title-text">
        <a href="{{ "/" | relURL }}">{{ .Site.Title }}</a>
      </div>
    {{ end }}
  </div>

  <nav class="main-nav">
    <div class="container">
      <button class="mobile-menu-toggle" aria-label="Toggle navigation menu" aria-expanded="false">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </button>

      <ul class="nav-menu">
        <li class="nav-item">
          <a href="{{ "/" | relURL }}">Home</a>
        </li>

        <li class="nav-item has-dropdown">
          <a class="dropdown-toggle">
            About PTSA
            <span class="dropdown-arrow">▾</span>
          </a>
          <ul class="dropdown-menu">
            <li><a href="{{ "/about/" | relURL }}">About Us</a></li>
            <li><a href="{{ "/board/" | relURL }}">Board Members</a></li>
          </ul>
        </li>

        <li class="nav-item">
          <a href="{{ "/events/" | relURL }}">Events</a>
        </li>

        <li class="nav-item">
          <a href="{{ "/news/" | relURL }}">News</a>
        </li>

        <li class="nav-item">
          <a href="{{ "/sponsors/" | relURL }}">Sponsors</a>
        </li>

        <li class="nav-item has-dropdown">
          <a class="dropdown-toggle">
            Resources
            <span class="dropdown-arrow">▾</span>
          </a>
          <ul class="dropdown-menu">
            <li><a href="{{ "/join/" | relURL }}">Join PTSA</a></li>
            <li><a href="{{ "/volunteer/" | relURL }}">Volunteer Opportunities</a></li>
            <li><a href="{{ "/our-school/staff-favorites/" | relURL }}">Staff Favorites & Wish Lists</a></li>
            <li><a href="{{ "/school-info/" | relURL }}">School Information</a></li>
          </ul>
        </li>

        <li class="nav-item btn-donate">
          <a href="{{ .Site.Params.donation_url }}">Donate</a>
        </li>
      </ul>
    </div>
  </nav>
</header>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const mobileToggle = document.querySelector('.mobile-menu-toggle');
    const navMenu = document.querySelector('.nav-menu');
    const dropdownToggles = document.querySelectorAll('.dropdown-toggle');

    // Mobile menu toggle
    if (mobileToggle) {
      mobileToggle.addEventListener('click', function() {
        const isExpanded = this.getAttribute('aria-expanded') === 'true';
        this.setAttribute('aria-expanded', !isExpanded);
        navMenu.classList.toggle('active');
        document.body.classList.toggle('menu-open');
      });
    }

    // Dropdown toggles for mobile
    dropdownToggles.forEach(toggle => {
      toggle.addEventListener('click', function(e) {
        // Only toggle on mobile
        if (window.innerWidth <= 768) {
          e.preventDefault();
          const parent = this.closest('.nav-item');
          parent.classList.toggle('active');
        }
      });
    });

    // Close menu when clicking outside
    document.addEventListener('click', function(e) {
      if (!e.target.closest('.main-nav') && navMenu.classList.contains('active')) {
        navMenu.classList.remove('active');
        mobileToggle.setAttribute('aria-expanded', 'false');
        document.body.classList.remove('menu-open');
      }
    });

    // Close menu on window resize to desktop
    window.addEventListener('resize', function() {
      if (window.innerWidth > 768 && navMenu.classList.contains('active')) {
        navMenu.classList.remove('active');
        mobileToggle.setAttribute('aria-expanded', 'false');
        document.body.classList.remove('menu-open');
      }
    });
  });
</script>
